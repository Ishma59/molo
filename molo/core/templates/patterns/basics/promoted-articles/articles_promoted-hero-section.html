{% load wagtailcore_tags wagtailimages_tags core_tags i18n %}

{% load_descendant_articles_for_section section featured_in_homepage=True as featured_articles %}
  {% if featured_articles %}
  <div class="{{section.get_effective_extra_style_hints}}">
  <h1 class="heading heading--x-large category__title category__title-{{type}}">
    <a href="{% pageurl section %}" class="category__link category__link-{{type}}">{{section.title}}</a>
  </h1>
  <ul class="promoted-article-list promoted-article-list--{{type}}">
    {% for article in featured_articles %}
    <li class="promoted-article-list__item {% if forloop.first %} promoted-article-list__item--hero{% endif %}">
      {% if article.image %}
      <a href="{% pageurl article %}" class="promoted-article-list__anchor">
      {% block image %}
        {% if forloop.first %}
          {% include "patterns/basics/article-image.html" with curve="semi-round" %}
        {% else %}
          {% include "patterns/basics/article-thumbnail.html" with curve="none" %}
        {% endif %}
      {% endblock %}
      </a>
      {% endif %}
      <a href="{% pageurl article %}" class="promoted-article-list__anchor">
        <h3 class="heading heading--large">
          {{article.title}}
        </h3>
      </a>
      <p class="promoted-article-list__desc">{{article.subtitle}}</p>
    </li>
  {% endfor %}
  </ul>
  </div>
  {% endif %}
