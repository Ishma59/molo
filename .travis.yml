language: python
python:
  - "2.7"
  - "pypy"
install:
  - pip install --upgrade pip
  - pip install coveralls
  - pip install flake8
  - pip install -r requirements-dev.txt
  - pip install -e .
script:
  - flake8 molo
  - ./run-tests.sh
after_success:
  - coveralls
deploy:
  provider: pypi
  user: Praekelt
  password:
    secure: XRtLnlbcqFVc0YYt7DZs/l/LATLoNshSGdaWyvVeULXIVWYxvrjighF4RZ0bSBgroP2M0ct4m1+s3j8584nHWFmYLZtEv9/cN3B7whcxcGm8lpXZl+BZsAXD7dx+W6P8Y/p2W2Q92ojmfeECMbx6wIuZOUqU3ofTgiWiOwAr4fE=
  on:
    tags: true
    all_branches: true
